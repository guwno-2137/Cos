
<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Hologram JS</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    background: #f2f2f2;
  }
  #hologram-container {
    display: flex;
    align-items: center;
  }
  #flag {
    position: relative;
    width: 30px;
    height: 35px;
  }
  #triangle {
    position: absolute;
    width: 8px;
    height: 4px;
    bottom: -4px;
    left: 11px; /* wycentrowany */
  }
  #text {
    margin-left: 5px;
    font-size: 16px;
    font-weight: 500;
    line-height: 1.3;
  }
</style>
</head>
<body>
<div id="hologram-container">
  <canvas id="flag"></canvas>
  <canvas id="triangle"></canvas>
  <div id="text">Rzeczpospolita<br>Polska</div>
</div>

<script>
// -------------------- COLORS --------------------
const colorSequence = [
  '#796F6F', '#217A9C', '#796F6F', '#C2C974', '#796F6F',
  '#8B0000', '#796F6F', '#29E11D', '#796F6F', '#29E11D',
  '#796F6F', '#217A9C', '#796F6F', '#C2C974', '#796F6F',
  '#8B0000', '#796F6F', '#8B0000', '#796F6F', '#C2C974',
  '#796F6F'
];

// Smoothstep
function smoothStep(t) { return t*t*(3-2*t); }

// Interpolacja kolorów
function lerpColor(c1, c2, t) {
  const f = parseInt;
  const r = Math.round(f(c1.substr(1,2),16)*(1-t) + f(c2.substr(1,2),16)*t);
  const g = Math.round(f(c1.substr(3,2),16)*(1-t) + f(c2.substr(3,2),16)*t);
  const b = Math.round(f(c1.substr(5,2),16)*(1-t) + f(c2.substr(5,2),16)*t);
  return `rgb(${r},${g},${b})`;
}

// Get color for angle
function getColorForAngle(angle) {
  let position = (angle / 360) * colorSequence.length;
  let i1 = Math.floor(position) % colorSequence.length;
  let i2 = (i1 + 1) % colorSequence.length;
  let t = smoothStep(position - Math.floor(position));
  return lerpColor(colorSequence[i1], colorSequence[i2], t);
}

// -------------------- CANVAS --------------------
const flagCanvas = document.getElementById('flag');
const flagCtx = flagCanvas.getContext('2d');

const triCanvas = document.getElementById('triangle');
const triCtx = triCanvas.getContext('2d');

let pitchAngle = 0;

// Gradient flagi
function drawFlag() {
  const grad = flagCtx.createLinearGradient(0,0,0,flagCanvas.height);
  for(let i=0;i<=8;i++){
    let angle = (pitchAngle -30 + i*15 + 360)%360;
    grad.addColorStop(i/8, getColorForAngle(angle));
  }
  flagCtx.fillStyle = grad;
  flagCtx.clearRect(0,0,flagCanvas.width,flagCanvas.height);
  // zaokrąglone dolne rogi
  const w = flagCanvas.width;
  const h = flagCanvas.height;
  const r = w*0.125;
  flagCtx.beginPath();
  flagCtx.moveTo(0,0);
  flagCtx.lineTo(w,0);
  flagCtx.lineTo(w,h-r);
  flagCtx.quadraticCurveTo(w,h,w-r,h);
  flagCtx.lineTo(r,h);
  flagCtx.quadraticCurveTo(0,h,0,h-r);
  flagCtx.closePath();
  flagCtx.fill();
}

// Trójkącik
function drawTriangle() {
  triCtx.clearRect(0,0,triCanvas.width,triCanvas.height);
  const w = triCanvas.width;
  const h = triCanvas.height;
  const start = getColorForAngle(pitchAngle+30);
  const mid = getColorForAngle(pitchAngle+45);
  const end = getColorForAngle(pitchAngle+60);
  const grad = triCtx.createLinearGradient(0,0,0,h);
  grad.addColorStop(0,start);
  grad.addColorStop(0.5,mid);
  grad.addColorStop(1,end);
  triCtx.fillStyle = grad;
  triCtx.beginPath();
  triCtx.moveTo(0,0);
  triCtx.lineTo(w,0);
  triCtx.quadraticCurveTo(w*0.6,h*0.3,w/2,h);
  triCtx.quadraticCurveTo(w*0.4,h*0.3,0,0);
  triCtx.closePath();
  triCtx.fill();
}

// -------------------- SENSOR --------------------
if(window.DeviceMotionEvent){
  window.addEventListener('devicemotion', e=>{
    const ay = e.accelerationIncludingGravity.y;
    const az = e.accelerationIncludingGravity.z;
    let pitch = Math.atan2(ay,az)*180/Math.PI;
    pitchAngle = (pitch+180)%360;
    drawFlag();
    drawTriangle();
  });
}else{
  // fallback: obracamy co 50ms dla desktop
  setInterval(()=>{pitchAngle=(pitchAngle+2)%360; drawFlag(); drawTriangle();},50);
}

// początkowe rysowanie
drawFlag();
drawTriangle();

</script>
</body>
</html>