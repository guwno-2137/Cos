<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Hologram Polska</title>
<style>
body {
  font-family: sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background: #f2f2f2;
}
#hologram-container {
  display: flex;
  align-items: center;
}
#flag {
  position: relative;
  width: 30px;
  height: 35px;
}
#triangle {
  position: absolute;
  width: 8px;
  height: 4px;
  bottom: -4px;
  left: 11px;
}
#text {
  margin-left: 5px;
  font-size: 16px;
  font-weight: 500;
  line-height: 1.3;
}
#eagle {
  position: absolute;
  top: 0;
  left: 0;
  width: 30px;
  height: 33.5px;
  pointer-events: none;
}
</style>
</head>
<body>
<div id="hologram-container">
  <canvas id="flag"></canvas>
  <canvas id="triangle"></canvas>
  <img id="eagle" src="https://upload.wikimedia.org/wikipedia/commons/1/12/Polish_coat_of_arms.svg" alt="OrzeÅ‚">
  <div id="text">Rzeczpospolita<br>Polska</div>
</div>

<script>
// -------------------- COLORS --------------------
const colorSequence = [
  '#796F6F', '#217A9C', '#796F6F', '#C2C974', '#796F6F',
  '#8B0000', '#796F6F', '#29E11D', '#796F6F', '#29E11D',
  '#796F6F', '#217A9C', '#796F6F', '#C2C974', '#796F6F',
  '#8B0000', '#796F6F', '#8B0000', '#796F6F', '#C2C974',
  '#796F6F'
];

function smoothStep(t) { return t*t*(3-2*t); }

function lerpColor(c1, c2, t) {
  const f = parseInt;
  const r = Math.round(f(c1.substr(1,2),16)*(1-t) + f(c2.substr(1,2),16)*t);
  const g = Math.round(f(c1.substr(3,2),16)*(1-t) + f(c2.substr(3,2),16)*t);
  const b = Math.round(f(c1.substr(5,2),16)*(1-t) + f(c2.substr(5,2),16)*t);
  return `rgb(${r},${g},${b})`;
}

function getColorForAngle(angle) {
  let pos = (angle / 360) * colorSequence.length;
  let i1 = Math.floor(pos) % colorSequence.length;
  let i2 = (i1 + 1) % colorSequence.length;
  let t = smoothStep(pos - Math.floor(pos));
  return lerpColor(colorSequence[i1], colorSequence[i2], t);
}

// -------------------- CANVAS --------------------
const flagCanvas = document.getElementById('flag');
const flagCtx = flagCanvas.getContext('2d');

const triCanvas = document.getElementById('triangle');
const triCtx = triCanvas.getContext('2d');

let pitchAngle = 0;

function drawFlag() {
  const grad = flagCtx.createLinearGradient(0,0,0,flagCanvas.height);
  for(let i=0;i<=8;i++){
    let angle = (pitchAngle -30 + i*15 + 360)%360;
    grad.addColorStop(i/8, getColorForAngle(angle));
  }
  flagCtx.fillStyle = grad;
  flagCtx.clearRect(0,0,flagCanvas.width,flagCanvas.height);
  const w = flagCanvas.width;
  const h = flagCanvas.height;
  const r = w*0.125;
  flagCtx.beginPath();
  flagCtx.moveTo(0,0);
  flagCtx.lineTo(w,0);
  flagCtx.lineTo(w,h-r);
  flagCtx.quadraticCurveTo(w,h,w-r,h);
  flagCtx.lineTo(r,h);
  flagCtx.quadraticCurveTo(0,h,0,h-r);
  flagCtx.closePath();
  flagCtx.fill();
}

function drawTriangle() {
  triCtx.clearRect(0,0,triCanvas.width,triCanvas.height);
  const w = triCanvas.width;
  const h = triCanvas.height;
  const start = getColorForAngle(pitchAngle+30);
  const mid = getColorForAngle(pitchAngle+45);
  const end = getColorForAngle(pitchAngle+60);
  const grad = triCtx.createLinearGradient(0,0,0,h);
  grad.addColorStop(0,start);
  grad.addColorStop(0.5,mid);
  grad.addColorStop(1,end);
  triCtx.fillStyle = grad;
  triCtx.beginPath();
  triCtx.moveTo(0,0);
  triCtx.lineTo(w,0);
  triCtx.quadraticCurveTo(w*0.6,h*0.3,w/2,h);
  triCtx.quadraticCurveTo(w*0.4,h*0.3,0,0);
  triCtx.closePath();
  triCtx.fill();
}

// -------------------- SENSOR --------------------
if(window.DeviceMotionEvent){
  window.addEventListener('devicemotion', e=>{
    const ay = e.accelerationIncludingGravity.y;
    const az = e.accelerationIncludingGravity.z;
    let pitch = Math.atan2(ay,az)*180/Math.PI;
    pitchAngle = (pitch+180)%360;
    drawFlag();
    drawTriangle();
  });
}else{
  setInterval(()=>{pitchAngle=(pitchAngle+2)%360; drawFlag(); drawTriangle();},50);
}

drawFlag();
drawTriangle();
</script>
</body>
</html>