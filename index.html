<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hologram mDowód-style</title>
<style>
  body { margin:0; display:flex; justify-content:center; align-items:center; height:100vh; background:#f0f0f0; }
  #doc {
    position: relative;
    width: 300px;
    height: 180px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    background: #fff;
  }
  canvas { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; }
  #godlo {
    position:absolute;
    top:50%;
    left:50%;
    width:80px;
    height:80px;
    transform: translate(-50%,-50%);
    pointer-events:none;
  }
</style>
</head>
<body>
  <div id="doc">
    <canvas id="c"></canvas>
    <img id="godlo" src="godlo.svg" alt="godło"/>
  </div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = canvas.clientWidth * devicePixelRatio;
  canvas.height = canvas.clientHeight * devicePixelRatio;
  ctx.scale(devicePixelRatio, devicePixelRatio);
}
resize();
window.addEventListener("resize", resize);

let angle = 0;

// funkcja rysująca hologram na koronie i okręgu
function drawHolo(t){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(t === 0) return; // jeśli telefon statyczny, brak kolorów

  const grd = ctx.createLinearGradient(0,0,canvas.clientWidth,canvas.clientHeight);
  grd.addColorStop(0, `hsl(${t*360}, 80%, 70%)`);
  grd.addColorStop(0.5, `hsl(${(t*360+60)%360}, 80%, 70%)`);
  grd.addColorStop(1, `hsl(${(t*360+120)%360}, 80%, 70%)`);

  ctx.strokeStyle = grd;
  ctx.lineWidth = 5;

  // okrąg wokół godła
  ctx.beginPath();
  ctx.arc(canvas.clientWidth/2, canvas.clientHeight/2, 40, 0, Math.PI*2);
  ctx.stroke();

  // korona (prostokątny prosty symbol korony na szczycie okręgu)
  ctx.beginPath();
  ctx.moveTo(canvas.clientWidth/2-15, canvas.clientHeight/2-40);
  ctx.lineTo(canvas.clientWidth/2, canvas.clientHeight/2-55);
  ctx.lineTo(canvas.clientWidth/2+15, canvas.clientHeight/2-40);
  ctx.stroke();
}

// nasłuch nachylenia telefonu
function handler(e){
  const y = e.accelerationIncludingGravity?.y;
  const z = e.accelerationIncludingGravity?.z;
  if(typeof y==="number" && typeof z==="number"){
    angle = (Math.atan2(y,z) * 180 / Math.PI + 180) % 360;
    const t = Math.min(Math.abs(angle-180)/180,1); // im bardziej przechylony, tym intensywniejszy kolor
    drawHolo(t);
  }
}

// fallback dla komputera – delikatna animacja
function fallbackAnim(){
  let t = 0;
  setInterval(()=>{
    t += 0.01;
    if(t>1) t=0;
    drawHolo(t);
  }, 40);
}

if(window.DeviceMotionEvent){
  window.addEventListener("devicemotion", handler);
}else{
  fallbackAnim();
}

drawHolo(0); // start – brak koloru
</script>
</body>
</html>