
<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Hologram Polska</title>
<style>
body {
  font-family: sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  background: #111;
  margin:0;
}
#hologram-container {
  position: relative;
  width: 60px;
  height: 70px;
}
#flagCanvas {
  width: 100%;
  height: 100%;
  display: block;
}
#eagle {
  position: absolute;
  top: 15%;
  left: 0;
  width: 100%;
  height: 70%;
  pointer-events: none;
}
#text {
  position: absolute;
  top: 105%;
  width: 100%;
  text-align: center;
  color: #fff;
  font-size: 12px;
}
</style>
</head>
<body>

<div id="hologram-container">
  <canvas id="flagCanvas" width="60" height="70"></canvas>
  <img id="eagle" src="https://upload.wikimedia.org/wikipedia/commons/1/12/Polish_coat_of_arms.svg" alt="Orzeł">
  <div id="text">Rzeczpospolita Polska</div>
</div>

<script>
// ---- COLORS & INTERPOLATION ----
const colors = [
  '#796F6F','#217A9C','#796F6F','#C2C974','#796F6F',
  '#8B0000','#796F6F','#29E11D','#796F6F','#29E11D',
  '#796F6F','#217A9C','#796F6F','#C2C974','#796F6F',
  '#8B0000','#796F6F','#8B0000','#796F6F','#C2C974','#796F6F'
];

function lerpColor(c1,c2,t){
  const f=parseInt;
  const r=Math.round(f(c1.substr(1,2),16)*(1-t)+f(c2.substr(1,2),16)*t);
  const g=Math.round(f(c1.substr(3,2),16)*(1-t)+f(c2.substr(3,2),16)*t);
  const b=Math.round(f(c1.substr(5,2),16)*(1-t)+f(c2.substr(5,2),16)*t);
  return `rgb(${r},${g},${b})`;
}

function smoothStep(t){ return t*t*(3-2*t); }

function getColor(angle){
  let pos=(angle/360)*colors.length;
  let i1=Math.floor(pos)%colors.length;
  let i2=(i1+1)%colors.length;
  let t=smoothStep(pos-Math.floor(pos));
  return lerpColor(colors[i1],colors[i2],t);
}

// ---- CANVAS ----
const canvas=document.getElementById('flagCanvas');
const ctx=canvas.getContext('2d');
let angle=0;

function drawHologram(a){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const h=canvas.height;
  const w=canvas.width;
  
  // gradient flagi
  const grad=ctx.createLinearGradient(0,0,0,h);
  for(let i=0;i<=8;i++){
    let col=getColor((a-30+i*15+360)%360);
    grad.addColorStop(i/8,col);
  }
  
  ctx.fillStyle=grad;
  
  // prostokąt z zaokrąglonymi dolnymi rogami
  const r=w*0.125;
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.lineTo(w,0);
  ctx.lineTo(w,h-r);
  ctx.quadraticCurveTo(w,h,w-r,h);
  ctx.lineTo(r,h);
  ctx.quadraticCurveTo(0,h,0,h-r);
  ctx.closePath();
  ctx.fill();
  
  // trójkącik na dole
  const triH=4;
  ctx.beginPath();
  ctx.moveTo(0,h);
  ctx.lineTo(w,h);
  ctx.quadraticCurveTo(w*0.6,h-triH*0.7,w/2,h+triH);
  ctx.quadraticCurveTo(w*0.4,h-triH*0.7,0,h);
  ctx.closePath();
  ctx.fillStyle=getColor((a+45)%360);
  ctx.fill();
}

// ---- SENSOR / ANIMATION ----
if(window.DeviceMotionEvent){
  window.addEventListener('devicemotion', e=>{
    const ay=e.accelerationIncludingGravity.y;
    const az=e.accelerationIncludingGravity.z;
    let pitch=Math.atan2(ay,az)*180/Math.PI;
    angle=(pitch+180)%360;
    drawHologram(angle);
  });
}else{
  // fallback dla desktop: animacja loop
  setInterval(()=>{angle=(angle+2)%360; drawHologram(angle);},30);
}

drawHologram(angle);
</script>

</body>
</html>